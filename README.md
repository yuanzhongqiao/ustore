<div class="Box-sc-g0xbh4-0 QkQOb js-snippet-clipboard-copy-unpositioned" data-hpc="true"><article class="markdown-body entry-content container-lg" itemprop="text"><div class="markdown-heading" dir="auto"><h1 align="center" tabindex="-1" class="heading-element" dir="auto" _msttexthash="5287490" _msthash="325">美国</h1><a id="user-content-ustore" class="anchor" aria-label="永久链接：UStore" href="#ustore" _mstaria-label="302432" _msthash="326"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 align="center" tabindex="-1" class="heading-element" dir="auto"><font _mstmutation="1" _msttexthash="7286305" _msthash="327">模块 化</font><sup _msttexthash="4459" _msthash="328">1</sup><font _mstmutation="1" _msttexthash="7748481" _msthash="329">多模式</font><sup _msttexthash="4550" _msthash="330">2</sup><font _mstmutation="1" _msttexthash="4029649" _msthash="331">事务</font><sup _msttexthash="4641" _msthash="332">3</sup><font _mstmutation="1" _msttexthash="23471877" _msthash="333">人工智能数据库<br _mstmutation="1" _istranslated="1"></font><sup _msttexthash="4732" _msthash="334">4</sup><font _mstmutation="1" _msttexthash="15952287" _msthash="335">和语义搜索</font><sup _msttexthash="4823" _msthash="336">5</sup><br>
</h3><a id="user-content-modular-1-multi-modal-2-transactional-3-databasefor-artificial-intelligence-4-and-semantic-search-5" class="anchor" aria-label="永久链接：
模块化多模式事务数据库
用于人工智能和语义搜索" href="#modular-1-multi-modal-2-transactional-3-databasefor-artificial-intelligence-4-and-semantic-search-5" _mstaria-label="6246955" _msthash="337"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<br>
<p align="center" dir="auto">
<a href="https://www.youtube.com/watch?v=ybWeUf_hC7o" rel="nofollow"><img height="25" width="25" src="https://github.com/unum-cloud/.github/raw/main/assets/youtube.svg" alt="优酷" style="max-width: 100%;" _mstalt="97500" _msthash="338"></a>
&nbsp;&nbsp;&nbsp;
<a href="https://discord.gg/4mxGrenbNt" rel="nofollow"><img height="25" width="25" src="https://github.com/unum-cloud/.github/raw/main/assets/discord.svg" alt="不和" style="max-width: 100%;" _mstalt="93990" _msthash="339"></a>
&nbsp;&nbsp;&nbsp;
<a href="https://www.linkedin.com/company/unum-cloud/" rel="nofollow"><img height="25" width="25" src="https://github.com/unum-cloud/.github/raw/main/assets/linkedin.svg" alt="LinkedIn" style="max-width: 100%;" _mstalt="107016" _msthash="340"></a>
&nbsp;&nbsp;&nbsp;
<a href="https://twitter.com/unum_cloud" rel="nofollow"><img height="25" width="25" src="https://github.com/unum-cloud/.github/raw/main/assets/twitter.svg" alt="唽" style="max-width: 100%;" _mstalt="98995" _msthash="341"></a>
&nbsp;&nbsp;&nbsp;
<a href="https://unum.cloud/post" rel="nofollow"><img height="25" width="25" src="https://github.com/unum-cloud/.github/raw/main/assets/blog.svg" alt="博客" style="max-width: 100%;" _mstalt="43615" _msthash="342"></a>
&nbsp;&nbsp;&nbsp;
<a href="https://github.com/unum-cloud/ukv"><img height="25" width="25" src="https://github.com/unum-cloud/.github/raw/main/assets/github.svg" alt="GitHub的" style="max-width: 100%;" _mstalt="72332" _msthash="343"></a>
</p>
<div align="center" dir="auto"><font _mstmutation="1" _msttexthash="2245670869" _msthash="344">1. 支持： <a href="https://github.com/facebook/rocksdb" _mstmutation="1" _istranslated="1">RocksDB</a> • <a href="https://github.com/google/leveldb" _mstmutation="1" _istranslated="1">LevelDB</a> • <a href="https://github.com/unum-cloud/udisk" _mstmutation="1" _istranslated="1">UDisk</a> • <a href="https://github.com/unum-cloud/ucset" _mstmutation="1" _istranslated="1">UCSet</a> <a href="/unum-cloud/ustore/blob/main/backends" _mstmutation="1" _istranslated="1">后端</a> <br _mstmutation="1" _istranslated="1"> 2.可以存储： <a href="#Blobs" _mstmutation="1" _istranslated="1">斑点</a> • <a href="#Documents" _mstmutation="1" _istranslated="1">文档</a> • <a href="#Graphs" _mstmutation="1" _istranslated="1">图形</a> •
🔜 特征
•
🔜 文本 <br _mstmutation="1" _istranslated="1"> 3：保证<a href="#Atomicity" _mstmutation="1" _istranslated="1">原子性</a> • <a href="#Consistency" _mstmutation="1" _istranslated="1">一致性</a> • <a href="#Isolation" _mstmutation="1" _istranslated="1">隔离性</a> • <a href="#Durability" _mstmutation="1" _istranslated="1">持久性</a> <br _mstmutation="1" _istranslated="1"> 4：附带
熊猫
和
网络X
应用程序接口
和 🔜
PyTorch data-loaders <br _mstmutation="1" _istranslated="1"> 5：带来
向量搜索
与 <a href="https://github.com/unum-cloud/usearch" _mstmutation="1" _istranslated="1">USearch</a> 和 <a href="https://github.com/unum-cloud/uform" _mstmutation="1" _istranslated="1">UForm</a> 集成</font>
</div>
<hr>
<div align="center" dir="auto">
<font _mstmutation="1" _msttexthash="108215640" _msthash="345"><b _mstmutation="1" _istranslated="1">驱动程序</b>：
蟒
•
C
•
C++
•
GoLang 语言
•
Java <br _mstmutation="1" _istranslated="1"> <b _mstmutation="1" _istranslated="1">包</b>： <a href="https://pypi.org/project/ukv/" rel="nofollow" _mstmutation="1" _istranslated="1">PyPI</a> • <a href="#cmake" _mstmutation="1" _istranslated="1">CMake</a> • <a href="https://hub.docker.com/repository/docker/unum/ustore" rel="nofollow" _mstmutation="1" _istranslated="1">Docker Hub</a></font>
<p dir="auto" _msttexthash="70341713" _msthash="346"><a href="https://www.youtube.com/watch?v=ybWeUf_hC7o" rel="nofollow" _istranslated="1">Youtube</a> 介绍 • <a href="https://discord.gg/4mxGrenbNt" rel="nofollow" _istranslated="1">Discord</a> 聊天 •
完整<a href="https://unum-cloud.github.io/ustore" rel="nofollow" _istranslated="1">文档</a></p>
<p dir="auto"><a href="https://discord.gg/4mxGrenbNt" rel="nofollow"><img src="https://camo.githubusercontent.com/c346079bb617c50ded756e2c413f4a8ff850373cd560a7ff29f442eb570da62a/68747470733a2f2f696d672e736869656c64732e696f2f646973636f72642f313036333934373631363631353932333837353f6c6162656c3d646973636f7264" data-canonical-src="https://img.shields.io/discord/1063947616615923875?label=discord" style="max-width: 100%;"></a>
&nbsp;&nbsp;
<a href="https://www.linkedin.com/company/unum-cloud/" rel="nofollow"><img src="https://camo.githubusercontent.com/1c395e4784a0d3b41a17bccb3c13aa2e335b33cea78e73f4782b3f7bfa32c16d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c696e6b6564696e2d636f6e6e6563745f776974685f75732d3061363663322e7376673f" data-canonical-src="https://img.shields.io/badge/linkedin-connect_with_us-0a66c2.svg?" style="max-width: 100%;"></a>
&nbsp;&nbsp;
<a href="https://twitter.com/unum_cloud" rel="nofollow"><img src="https://camo.githubusercontent.com/5d5e8b60ec2d843738cb59dea475688e7e7b65f41846018a105e769469a08616/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f747769747465722d666f6c6c6f775f75732d3164396266302e7376673f" data-canonical-src="https://img.shields.io/badge/twitter-follow_us-1d9bf0.svg?" style="max-width: 100%;"></a>
&nbsp;&nbsp;
<a href="https://zenodo.org/badge/latestdoi/502647695" rel="nofollow"><img src="https://camo.githubusercontent.com/237fd039cffb0aea164b37c4889f3357604b0d08ab6c0b71204155bd9a3f689e/68747470733a2f2f7a656e6f646f2e6f72672f62616467652f3530323634373639352e737667" alt="数字对象标识符" data-canonical-src="https://zenodo.org/badge/502647695.svg" style="max-width: 100%;" _mstalt="22945" _msthash="347"></a>
&nbsp;&nbsp;
<a href="https://www.github.com/unum-cloud/"><img src="https://camo.githubusercontent.com/54f1d4261d718d884e8fd4b5d67c5efea1094c39f46c34891721a675b367dec6/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6973737565732d636c6f7365642d7261772f756e756d2d636c6f75642f7573746f72653f" data-canonical-src="https://img.shields.io/github/issues-closed-raw/unum-cloud/ustore?" style="max-width: 100%;"></a>
&nbsp;&nbsp;
<a href="https://www.github.com/unum-cloud/"><img src="https://camo.githubusercontent.com/7aaa1ed6736e8c658aa0c5238dd558c0e2494ea6cf506155e102b9f7c10bcd5d/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f73746172732f756e756d2d636c6f75642f7573746f72653f" data-canonical-src="https://img.shields.io/github/stars/unum-cloud/ustore?" style="max-width: 100%;"></a>
&nbsp;&nbsp;
<a href="#"><img src="https://camo.githubusercontent.com/55509bf05a473ab23b2be05ea5ad0895bd2a0ca624e281983c988e2106056fef/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f776f726b666c6f772f7374617475732f756e756d2d636c6f75642f7573746f72652f4275696c64" data-canonical-src="https://img.shields.io/github/workflow/status/unum-cloud/ustore/Build" style="max-width: 100%;"></a></p>
</div>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="13498394" _msthash="348">快速入门</h2><a id="user-content-quickstart" class="anchor" aria-label="永久链接：快速入门" href="#quickstart" _mstaria-label="446966" _msthash="349"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font _mstmutation="1" _msttexthash="139202999" _msthash="350">安装 UStore 轻而易举，使用方法就像 Python 一样简单。</font><code>dict</code></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre>$ <span class="pl-s1">pip</span> <span class="pl-s1">install</span> <span class="pl-s1">ukv</span>
$ <span class="pl-s1">python</span>

<span class="pl-k">from</span> <span class="pl-s1">ukv</span> <span class="pl-k">import</span> <span class="pl-s1">umem</span>

<span class="pl-s1">db</span> <span class="pl-c1">=</span> <span class="pl-s1">umem</span>.<span class="pl-v">DataBase</span>()
<span class="pl-s1">db</span>.<span class="pl-s1">main</span>[<span class="pl-c1">42</span>] <span class="pl-c1">=</span> <span class="pl-s">'Hi'</span></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="$ pip install ukv
$ python

from ukv import umem

db = umem.DataBase()
db.main[42] = 'Hi'" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font _mstmutation="1" _msttexthash="567918221" _msthash="351">我们刚刚创建了一个内存嵌入式事务数据库，并在其集合中添加了一个条目。
您希望该数据位于磁盘上吗？
更改一行。</font><code>main</code></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">ukv</span> <span class="pl-k">import</span> <span class="pl-s1">rocksdb</span>

<span class="pl-s1">db</span> <span class="pl-c1">=</span> <span class="pl-s1">rocksdb</span>.<span class="pl-v">DataBase</span>(<span class="pl-s">'/some-folder/'</span>)</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from ukv import rocksdb

db = rocksdb.DataBase('/some-folder/')" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="215808996" _msthash="352">您是否希望连接到远程 UStore 服务器？
UStore 自带一个 Apache Arrow Flight RPC 接口！</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">ukv</span> <span class="pl-k">import</span> <span class="pl-s1">flight_client</span>

<span class="pl-s1">db</span> <span class="pl-c1">=</span> <span class="pl-s1">flight_client</span>.<span class="pl-v">DataBase</span>(<span class="pl-s">'grpc://0.0.0.0:38709'</span>)</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from ukv import flight_client

db = flight_client.DataBase('grpc://0.0.0.0:38709')" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><font _mstmutation="1" _msttexthash="142450035" _msthash="353">您是否存储类似 <a href="https://networkx.org" rel="nofollow" _mstmutation="1" _istranslated="1">NetworkX</a> 的 ？
还是像<a href="https://pandas.pydata.org" rel="nofollow" _mstmutation="1" _istranslated="1">熊猫</a>一样？</font><code>MultiDiGraph</code><code>DataFrame</code></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-s1">db</span> <span class="pl-c1">=</span> <span class="pl-s1">rocksdb</span>.<span class="pl-v">DataBase</span>()

<span class="pl-s1">users_table</span> <span class="pl-c1">=</span> <span class="pl-s1">db</span>[<span class="pl-s">'users'</span>].<span class="pl-s1">table</span>
<span class="pl-s1">users_table</span>.<span class="pl-en">merge</span>(<span class="pl-s1">pd</span>.<span class="pl-v">DataFrame</span>([
    {<span class="pl-s">'id'</span>: <span class="pl-c1">1</span>, <span class="pl-s">'name'</span>: <span class="pl-s">'Lex'</span>, <span class="pl-s">'lastname'</span>: <span class="pl-s">'Fridman'</span>},
    {<span class="pl-s">'id'</span>: <span class="pl-c1">2</span>, <span class="pl-s">'name'</span>: <span class="pl-s">'Joe'</span>, <span class="pl-s">'lastname'</span>: <span class="pl-s">'Rogan'</span>},
]))

<span class="pl-s1">friends_graph</span> <span class="pl-c1">=</span> <span class="pl-s1">db</span>[<span class="pl-s">'friends'</span>].<span class="pl-s1">graph</span>
<span class="pl-s1">friends_graph</span>.<span class="pl-en">add_edge</span>(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>)

<span class="pl-k">assert</span> <span class="pl-s1">friends_graph</span>.<span class="pl-en">has_edge</span>(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>) <span class="pl-c1">and</span> \
    <span class="pl-s1">friends_graph</span>.<span class="pl-en">has_node</span>(<span class="pl-c1">1</span>) <span class="pl-c1">and</span> \
    <span class="pl-s1">friends_graph</span>.<span class="pl-en">number_of_edges</span>(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>) <span class="pl-c1">==</span> <span class="pl-c1">1</span></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="db = rocksdb.DataBase()

users_table = db['users'].table
users_table.merge(pd.DataFrame([
    {'id': 1, 'name': 'Lex', 'lastname': 'Fridman'},
    {'id': 2, 'name': 'Joe', 'lastname': 'Rogan'},
]))

friends_graph = db['friends'].graph
friends_graph.add_edge(1, 2)

assert friends_graph.has_edge(1, 2) and \
    friends_graph.has_node(1) and \
    friends_graph.number_of_edges(1, 2) == 1" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="385795345" _msthash="354">函数调用可能看起来相同，但底层实现可以寻址放置在远程机器上持久内存中某处的数百 TB 数据。</p>
<hr>
<p dir="auto" _msttexthash="209709591" _msthash="355">其他人是否同时更新这些集合？
捆绑您的操作以保证一致性！</p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-s1">db</span> <span class="pl-c1">=</span> <span class="pl-s1">rocksdb</span>.<span class="pl-v">DataBase</span>()
<span class="pl-k">with</span> <span class="pl-s1">db</span>.<span class="pl-en">transact</span>() <span class="pl-k">as</span> <span class="pl-s1">txn</span>:
    <span class="pl-s1">txn</span>[<span class="pl-s">'users'</span>].<span class="pl-s1">table</span>.<span class="pl-en">merge</span>(...)
    <span class="pl-s1">txn</span>[<span class="pl-s">'friends'</span>].<span class="pl-s1">graph</span>.<span class="pl-en">add_edge</span>(<span class="pl-c1">1</span>, <span class="pl-c1">2</span>)</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="db = rocksdb.DataBase()
with db.transact() as txn:
    txn['users'].table.merge(...)
    txn['friends'].graph.add_edge(1, 2)" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="155613159" _msthash="356">到目前为止，我们只介绍了 UStore 的尖端。
您可以使用它来...</p>
<ol dir="auto">
<li _msttexthash="120619070" _msthash="357">获取适用于 RocksDB 或 LevelDB 的 C99、Python、GoLang 或 Java 包装器。</li>
<li _msttexthash="98546695" _msthash="358">通过 Apache Arrow Flight RPC 将它们提供给 Spark、Kafka 或 PyTorch。</li>
<li _msttexthash="212106752" _msthash="359">将 Document 和 Graphs 存储在嵌入式数据库中，避免网络开销。</li>
<li _msttexthash="141012469" _msthash="360">将 DBMS 置于一个 API 下的内存后端和持久性后端之间。</li>
</ol>
<p dir="auto" _msttexthash="86844654" _msthash="361">但 UStore 可以做得更多。
这是地图：</p>
<ul dir="auto">
<li><font _mstmutation="1" _msttexthash="21266102" _msthash="362"><a href="#basic-usage" _mstmutation="1" _istranslated="1">基本用法</a>：</font><ul dir="auto">
<li><a href="#modalities" _msttexthash="4900571" _msthash="363">方式</a>
<ul dir="auto">
<li _msttexthash="4328259" _msthash="364">存储 <a href="#blobs" _istranslated="1">Blob</a></li>
<li _msttexthash="10790273" _msthash="365">存储<a href="#documents" _istranslated="1">文档</a></li>
<li _msttexthash="10055266" _msthash="366">存储<a href="#graphs" _istranslated="1">图形</a></li>
<li _msttexthash="11645803" _msthash="367">存储<a href="#vectors" _istranslated="1">向量</a></li>
</ul>
</li>
<li><a href="#drivers" _msttexthash="4704440" _msthash="368">司机</a>
<ul dir="auto">
<li _msttexthash="6029166" _msthash="369">对于 <a href="https://unum.cloud/docs/ustore/python" rel="nofollow" _istranslated="1">Python ∆</a></li>
<li _msttexthash="5374174" _msthash="370">对于 <a href="https://unum.cloud/docs/ustore/c" rel="nofollow" _istranslated="1">C ∆</a></li>
<li _msttexthash="5612373" _msthash="371">对于 <a href="https://unum.cloud/docs/ustore/cpp" rel="nofollow" _istranslated="1">C++ ∆</a></li>
<li _msttexthash="6018558" _msthash="372">对于 <a href="https://unum.cloud/docs/ustore/golang" rel="nofollow" _istranslated="1">GoLang ∆</a></li>
<li _msttexthash="5759299" _msthash="373">对于 <a href="https://unum.cloud/docs/ustore/java" rel="nofollow" _istranslated="1">Java ∆</a></li>
</ul>
</li>
<li><a href="https://unum.cloud/docs/ustore/ai" rel="nofollow" _msttexthash="7415291" _msthash="374">AI 用例 ∆</a></li>
<li><a href="#frequently-questioned-answers" _msttexthash="24110866" _msthash="375">常见问题答案</a></li>
<li><a href="#frequently-asked-questions" _msttexthash="25404483" _msthash="376">常见问题解答</a></li>
</ul>
</li>
<li><font _mstmutation="1" _msttexthash="116094186" _msthash="377">用于生产、性能调整和管理<a href="#advanced-usage" _mstmutation="1" _istranslated="1">的高级用法</a>：</font><ul dir="auto">
<li><a href="#engines" _msttexthash="7245069" _msthash="378">发动机</a></li>
<li><a href="#transactions" _msttexthash="4549636" _msthash="379">交易</a>
<ul dir="auto">
<li><a href="#atomicity" _msttexthash="7417397" _msthash="380">原子数</a></li>
<li><a href="#consistency" _msttexthash="8156915" _msthash="381">一致性</a></li>
<li><a href="#isolation" _msttexthash="6748820" _msthash="382">隔离</a></li>
<li><a href="#durability" _msttexthash="7947147" _msthash="383">耐久性</a></li>
</ul>
</li>
<li><a href="#containers-and-cloud-deployments" _msttexthash="19978673" _msthash="384">容器和云部署</a></li>
<li><a href="#configuration" _msttexthash="6777615" _msthash="385">配置</a>
<ul dir="auto">
<li><a href="#key-sizes" _msttexthash="11829467" _msthash="386">密钥大小</a></li>
<li><a href="#value-sizes" _msttexthash="7000071" _msthash="387">值大小</a></li>
</ul>
</li>
<li><a href="https://unum.cloud/docs/ustore/tools" rel="nofollow" _msttexthash="5375357" _msthash="388">工具 ∆</a></li>
<li><a href="https://unum.cloud/docs/ustore/tests" rel="nofollow" _msttexthash="7288047" _msthash="389">测试 ∆</a></li>
<li><a href="https://unum.cloud/docs/ustore/benchmarks" rel="nofollow" _msttexthash="13399321" _msthash="390">基准测试 ∆</a></li>
</ul>
</li>
<li><font _mstmutation="1" _msttexthash="394211298" _msthash="391">对于希望分叉、扩展、包装或分发 UStore 的替代版本并可能从中获利的贡献者和高级用户：</font><ul dir="auto">
<li><a href="https://unum.cloud/docs/ustore/architecture" rel="nofollow" _msttexthash="25773085" _msthash="392">架构和依赖关系 ∆</a></li>
<li><a href="https://github.com/orgs/unum-cloud/projects/2" _msttexthash="10418863" _msthash="393">路线图 ∆</a></li>
<li><a href="https://unum.cloud/docs/ustore/contributing" rel="nofollow" _msttexthash="7373353" _msthash="394">贡献∆</a></li>
</ul>
</li>
</ul>
<hr>
<p dir="auto" _msttexthash="14710631" _msthash="395">## 基本用法</p>
<p dir="auto" _msttexthash="1034093333" _msthash="396">UStore 不仅用作数据库，还用作“构建数据库”工具包和 NoSQL 潜在事务性数据库的开放标准，为“创建、读取、更新、删除”操作或简称 CRUD 定义零副本二进制接口。</p>
<p dir="auto" _msttexthash="1354175680" _msthash="397"><a href="https://github.com/unum-cloud/ustore/tree/main/include/ustore" _istranslated="1">一些简单的 C99 标头</a>可以将几乎任何底层存储<a href="#engines" _istranslated="1">引擎</a>链接到许多高级语言<a href="#drivers" _istranslated="1">驱动程序</a>，将它们对二进制字符串值的支持扩展到图形、灵活架构文档和其他<a href="#modalities" _istranslated="1">模式</a>，旨在用单个 ACID 事务系统取代 MongoDB、Neo4J、Pinecone 和 ElasticSearch。</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/unum-cloud/ustore/blob/main/assets/charts/Intro.png"><img src="/unum-cloud/ustore/raw/main/assets/charts/Intro.png" alt="UStore：小地图" style="max-width: 100%;" _mstalt="266721" _msthash="398"></a></p>
<p dir="auto" _msttexthash="1988619698" _msthash="399">例如，<a href="https://redis.com" rel="nofollow" _istranslated="1">Redis</a> 为具有类似目标的 RediSearch、RedisJSON 和 RedisGraph 提供了类似的目标。
UStore 做得更好，它允许您添加自己喜欢的键值存储 （KVS），包括嵌入式、独立或分片的，例如 <a href="https://www.foundationdb.org/" rel="nofollow" _istranslated="1">FoundationDB</a>，从而增加其功能。</p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto" _msttexthash="4900571" _msthash="400">方式</h3><a id="user-content-modalities" class="anchor" aria-label="永久链接：模态" href="#modalities" _mstaria-label="438269" _msthash="401"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto" _msttexthash="5367219" _msthash="402">斑点</h4><a id="user-content-blobs" class="anchor" aria-label="永久链接：Blob" href="#blobs" _mstaria-label="270855" _msthash="403"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="2077351874" _msthash="404">二进制大型对象可以放置在 UStore 中。
性能会因使用的底层技术而有很大差异。
内存中的 UCSet 速度最快，但最不适合较大的对象。
持久化 UDisk 在正确配置后，可以完全绕过 Linux 内核，包括文件系统层，直接对块设备进行寻址。</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/unum-cloud/ustore/blob/main/assets/charts/PerformanceBinary.png"><img src="/unum-cloud/ustore/raw/main/assets/charts/PerformanceBinary.png" alt="UDisk 和 RocksDB 的二进制处理性能图表" style="max-width: 100%;" _mstalt="2050646" _msthash="405"></a></p>
<p dir="auto" _msttexthash="2762146465" _msthash="406">当基于 <a href="https://spdk.io" rel="nofollow" _istranslated="1">SPDK</a> 等用户空间驱动程序构建时，高端服务器上的现代持久 IO 可以超过每个插槽 100 GB/s。
这接近高端 RAM 的实际吞吐量，并解锁了数据库不常见的新用例。
现在可以将 GB 大小的视频文件放在 ACID 事务数据库中的元数据旁边，而不是使用单独的对象存储，如 MinIO。</p>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto" _msttexthash="4467437" _msthash="407">文件</h4><a id="user-content-documents" class="anchor" aria-label="永久链接： 文档" href="#documents" _mstaria-label="407680" _msthash="408"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="233095928" _msthash="409">JSON 是当今最常用的文档格式。
UStore 文档集合支持 JSON 以及 MongoDB 使用的 MessagePack 和 BSON。</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/unum-cloud/ustore/blob/main/assets/charts/PerformanceDocs.png"><img src="/unum-cloud/ustore/raw/main/assets/charts/PerformanceDocs.png" alt="UStore 和 MongoDB 的文档处理性能图表" style="max-width: 100%;" _mstalt="2378883" _msthash="410"></a></p>
<p dir="auto"><font _mstmutation="1" _msttexthash="2534309752" _msthash="411">UStore 尚不能水平扩展，但提供了更高的单节点性能，并且由于开源和库，在多核系统上具有几乎线性的垂直可扩展性。
此外，要与数据交互，您不需要像 MQL 这样的自定义查询语言。
相反，我们优先考虑开放的 RFC 标准，以真正避免供应商锁定：</font><code>simdjson</code><code>yyjson</code></p>
<ul dir="auto">
<li _msttexthash="87039472" _msthash="412"><a href="https://datatracker.ietf.org/doc/html/rfc6901" rel="nofollow" _istranslated="1">JSON 指针：RFC 6901</a> 用于寻址嵌套字段。</li>
<li _msttexthash="102263343" _msthash="413"><a href="https://datatracker.ietf.org/doc/html/rfc6902" rel="nofollow" _istranslated="1">JSON 补丁：RFC 6902</a>，用于字段级更新。</li>
<li _msttexthash="102100310" _msthash="414"><a href="https://datatracker.ietf.org/doc/html/rfc7386" rel="nofollow" _istranslated="1">JSON MergePatch：RFC 7386</a> 用于文档级更新。</li>
</ul>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto" _msttexthash="2026570" _msthash="415">图</h4><a id="user-content-graphs" class="anchor" aria-label="永久链接： 图表" href="#graphs" _mstaria-label="303433" _msthash="416"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="875201704" _msthash="417">Neo4J 等现代图形数据库难以处理大型工作负载。
它们需要太多的 RAM，并且它们的算法一次观察一个条目的数据。
我们在两个方面进行优化：</p>
<ul dir="auto">
<li _msttexthash="58181799" _msthash="418">使用 delta 编码压缩倒排索引。</li>
<li _msttexthash="287615718" _msthash="419">更新用于高延迟存储的经典图形算法，以类似 Batch 或以 Edge 为中心的方式处理图形。</li>
</ul>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto" _msttexthash="5840419" _msthash="420">向量</h4><a id="user-content-vectors" class="anchor" aria-label="永久链接：向量" href="#vectors" _mstaria-label="341250" _msthash="421"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="1107413125" _msthash="422">Feature Store 和 Vector Database（如 Pinecone、Milvus 和 USearch）为向量搜索提供独立的索引。
UStore 将其作为单独的模式实现，与 Documents 和 Graphs 相当。
特征：</p>
<ul dir="auto">
<li _msttexthash="19263855" _msthash="423">8 位整数量化。</li>
<li _msttexthash="21808085" _msthash="424">16 位浮点量化。</li>
<li _msttexthash="45518837" _msthash="425">Cosine、Inner Product 和 Euclidean 度量。</li>
</ul>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto" _msttexthash="4704440" _msthash="426">司机</h3><a id="user-content-drivers" class="anchor" aria-label="永久链接：驱动程序" href="#drivers" _mstaria-label="339586" _msthash="427"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="766182625" _msthash="428">Python 和 C++ 的 UStore 看起来非常不同。
我们的 Python 开发工具包模拟其他 Python 库 - <a href="https://pandas.pydata.org" rel="nofollow" _istranslated="1">Pandas</a> 和 <a href="https://networkx.org" rel="nofollow" _istranslated="1">NetworkX</a>。
同样，C++ 库提供了 C++ 开发人员期望的接口。</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/unum-cloud/ustore/blob/main/assets/charts/Frontend.png"><img src="/unum-cloud/ustore/raw/main/assets/charts/Frontend.png" alt="UStore：前端" style="max-width: 100%;" _mstalt="309478" _msthash="429"></a></p>
<p dir="auto" _msttexthash="779133849" _msthash="430">众所周知，人们出于不同的目的使用不同的语言。
某些 C 级功能未针对某些语言实现。
要么是因为没有需求，要么是因为我们还没有开始。</p>
<markdown-accessiblity-table data-catalyst=""><table>
<thead>
<tr>
<th align="left" _msttexthash="4389879" _msthash="431">名字</th>
<th align="center" _msttexthash="5013658" _msthash="432">办理</th>
<th align="center" _msttexthash="6372002" _msthash="433">收集</th>
<th align="center" _msttexthash="5146219" _msthash="434">批次</th>
<th align="center" _msttexthash="5144373" _msthash="435">文档</th>
<th align="center" _msttexthash="2026570" _msthash="436">图</th>
<th align="center" _msttexthash="4667221" _msthash="437">副本</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><a href="https://unum.cloud/docs/ustore/c" rel="nofollow" _msttexthash="6474286" _msthash="438">C99 标准</a></td>
<td align="center" _msttexthash="910273" _msthash="439">✓</td>
<td align="center" _msttexthash="910273" _msthash="440">✓</td>
<td align="center" _msttexthash="910273" _msthash="441">✓</td>
<td align="center" _msttexthash="910273" _msthash="442">✓</td>
<td align="center" _msttexthash="910273" _msthash="443">✓</td>
<td align="center" _msttexthash="4368" _msthash="444">0</td>
</tr>
<tr>
<td align="left"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="left"><a href="https://unum.cloud/docs/ustore/cpp" rel="nofollow" _msttexthash="17387864" _msthash="445">C++ 开发工具包</a></td>
<td align="center" _msttexthash="910273" _msthash="446">✓</td>
<td align="center" _msttexthash="910273" _msthash="447">✓</td>
<td align="center" _msttexthash="910273" _msthash="448">✓</td>
<td align="center" _msttexthash="910273" _msthash="449">✓</td>
<td align="center" _msttexthash="910273" _msthash="450">✓</td>
<td align="center" _msttexthash="4368" _msthash="451">0</td>
</tr>
<tr>
<td align="left"><a href="https://unum.cloud/docs/ustore/python" rel="nofollow" _msttexthash="21817211" _msthash="452">Python 开发工具包</a></td>
<td align="center" _msttexthash="910273" _msthash="453">✓</td>
<td align="center" _msttexthash="910273" _msthash="454">✓</td>
<td align="center" _msttexthash="910273" _msthash="455">✓</td>
<td align="center" _msttexthash="910273" _msthash="456">✓</td>
<td align="center" _msttexthash="910273" _msthash="457">✓</td>
<td align="center" _msttexthash="14781" _msthash="458">0-1</td>
</tr>
<tr>
<td align="left"><a href="https://unum.cloud/docs/ustore/golang" rel="nofollow" _msttexthash="21808527" _msthash="459">GoLang 开发工具包</a></td>
<td align="center" _msttexthash="910273" _msthash="460">✓</td>
<td align="center" _msttexthash="910273" _msthash="461">✓</td>
<td align="center" _msttexthash="910273" _msthash="462">✓</td>
<td align="center" _msttexthash="910637" _msthash="463">✗</td>
<td align="center" _msttexthash="910637" _msthash="464">✗</td>
<td align="center" _msttexthash="4459" _msthash="465">1</td>
</tr>
<tr>
<td align="left"><a href="https://unum.cloud/docs/ustore/java" rel="nofollow" _msttexthash="18870488" _msthash="466">Java 开发工具包</a></td>
<td align="center" _msttexthash="910273" _msthash="467">✓</td>
<td align="center" _msttexthash="910273" _msthash="468">✓</td>
<td align="center" _msttexthash="910637" _msthash="469">✗</td>
<td align="center" _msttexthash="910637" _msthash="470">✗</td>
<td align="center" _msttexthash="910637" _msthash="471">✗</td>
<td align="center" _msttexthash="4459" _msthash="472">1</td>
</tr>
<tr>
<td align="left"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="left" _msttexthash="15072941" _msthash="473">箭牌飞行 API</td>
<td align="center" _msttexthash="910273" _msthash="474">✓</td>
<td align="center" _msttexthash="910273" _msthash="475">✓</td>
<td align="center" _msttexthash="910273" _msthash="476">✓</td>
<td align="center" _msttexthash="910273" _msthash="477">✓</td>
<td align="center" _msttexthash="910273" _msthash="478">✓</td>
<td align="center" _msttexthash="14898" _msthash="479">0-2</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto" _msttexthash="552679712" _msthash="480">这里的一些前端有完整的生态系统！<a href="https://arrow.apache.org/docs/format/Flight.html" rel="nofollow" _istranslated="1">阿帕奇箭飞行</a>例如，API 有自己的 C、C++、C#、Go、Java、JavaScript、Julia、MATLAB、Python、R、Ruby 和 Rust 驱动程序。</p>
<p dir="auto"><a target="_blank" rel="noopener noreferrer" href="/unum-cloud/ustore/blob/main/assets/charts/Arrow.png"><img src="/unum-cloud/ustore/raw/main/assets/charts/Arrow.png" alt="UStore：前端" style="max-width: 100%;" _mstalt="309478" _msthash="481"></a></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto" _msttexthash="24110866" _msthash="482">常见问题答案</h3><a id="user-content-frequently-questioned-answers" class="anchor" aria-label="永久链接： 常见问题答案" href="#frequently-questioned-answers" _mstaria-label="1268605" _msthash="483"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li _msttexthash="95090125" _msthash="484">默认情况下，键是 64 位整数。<a href="#key-sizes" _istranslated="1">为什么？</a></li>
<li _msttexthash="109913401" _msthash="485">值是长度小于 4 GB 的二进制字符串。<a href="#value-sizes" _istranslated="1">为什么？</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto" _msttexthash="25404483" _msthash="486">常见问题解答</h3><a id="user-content-frequently-asked-questions" class="anchor" aria-label="永久链接：常见问题" href="#frequently-asked-questions" _mstaria-label="1089842" _msthash="487"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li _msttexthash="150752979" _msthash="488">默认情况下，事务是 ACI（D）。<a href="#transactions" _istranslated="1">这是什么意思？</a></li>
<li _msttexthash="88259236" _msthash="489">为什么不使用 LevelDB 或 RocksDB 接口？<a href="https://unum.cloud/docs/ustore/related#leveldb-rocksdb" rel="nofollow" _istranslated="1">回答</a></li>
<li _msttexthash="68694912" _msthash="490">为什么不使用 SQL、MQL 或 CYPHER？<a href="https://unum.cloud/docs/ustore/related#sql-mql-cypher" rel="nofollow" _istranslated="1">回答</a></li>
<li _msttexthash="65077597" _msthash="491">UStore 是否支持 Time-To-Live？<a href="https://github.com/unum-cloud/ustore/discussions/230" data-hovercard-type="discussion" data-hovercard-url="/unum-cloud/ustore/discussions/230/hovercard" _istranslated="1">回答</a></li>
<li _msttexthash="53750060" _msthash="492">UStore 支持压缩吗？<a href="https://github.com/unum-cloud/ustore/discussions/232" data-hovercard-type="discussion" data-hovercard-url="/unum-cloud/ustore/discussions/232/hovercard" _istranslated="1">回答</a></li>
<li _msttexthash="62684401" _msthash="493">UStore 是否支持队列？<a href="https://github.com/unum-cloud/ustore/discussions/228" data-hovercard-type="discussion" data-hovercard-url="/unum-cloud/ustore/discussions/228/hovercard" _istranslated="1">回答</a></li>
<li _msttexthash="80083562" _msthash="494">如何为语言 X 添加驱动程序？<a href="https://github.com/unum-cloud/ustore/c#implementing-a-new-language-binding" _istranslated="1">回答</a></li>
<li _msttexthash="73126222" _msthash="495">如何将数据库 X 添加为引擎？<a href="https://github.com/unum-cloud/ustore/c#implementing-a-new-engine" _istranslated="1">回答</a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="14110226" _msthash="496">高级用法</h2><a id="user-content-advanced-usage" class="anchor" aria-label="永久链接：高级用法" href="#advanced-usage" _mstaria-label="534690" _msthash="497"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto" _msttexthash="7245069" _msthash="498">发动机</h3><a id="user-content-engines" class="anchor" aria-label="永久链接： 引擎" href="#engines" _mstaria-label="333736" _msthash="499"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="712249174" _msthash="500">以下发动机几乎可以互换使用。
从历史上看，LevelDB 是第一个。
然后，RocksDB 改进了功能和性能。
现在，它是一半 DBMS 初创公司的基础。</p>
<markdown-accessiblity-table data-catalyst=""><table>
<thead>
<tr>
<th align="left"></th>
<th align="center" _msttexthash="14807156" _msthash="501">LevelDB 数据库</th>
<th align="center" _msttexthash="14808300" _msthash="502">RocksDB 数据库</th>
<th align="center" _msttexthash="57343" _msthash="503">UDisk</th>
<th align="center" _msttexthash="54132" _msthash="504">UCSet</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><strong _msttexthash="5877365" _msthash="505">速度</strong></td>
<td align="center" _msttexthash="2135731" _msthash="506">1 倍</td>
<td align="center" _msttexthash="2135822" _msthash="507">2 倍</td>
<td align="center"><strong _msttexthash="2407132" _msthash="508">10 倍</strong></td>
<td align="center"><strong _msttexthash="2407314" _msthash="509">30 倍</strong></td>
</tr>
<tr>
<td align="left"><strong _msttexthash="5685667" _msthash="510">持续</strong></td>
<td align="center" _msttexthash="910273" _msthash="511">✓</td>
<td align="center" _msttexthash="910273" _msthash="512">✓</td>
<td align="center" _msttexthash="910273" _msthash="513">✓</td>
<td align="center" _msttexthash="910637" _msthash="514">✗</td>
</tr>
<tr>
<td align="left"><strong _msttexthash="4029649" _msthash="515">事务</strong></td>
<td align="center" _msttexthash="910637" _msthash="516">✗</td>
<td align="center" _msttexthash="910273" _msthash="517">✓</td>
<td align="center" _msttexthash="910273" _msthash="518">✓</td>
<td align="center" _msttexthash="910273" _msthash="519">✓</td>
</tr>
<tr>
<td align="left"><strong _msttexthash="15413437" _msthash="520">块设备支持</strong></td>
<td align="center" _msttexthash="910637" _msthash="521">✗</td>
<td align="center" _msttexthash="910637" _msthash="522">✗</td>
<td align="center" _msttexthash="910273" _msthash="523">✓</td>
<td align="center" _msttexthash="910637" _msthash="524">✗</td>
</tr>
<tr>
<td align="left" _msttexthash="4368208" _msthash="525">加密</td>
<td align="center" _msttexthash="910637" _msthash="526">✗</td>
<td align="center" _msttexthash="910637" _msthash="527">✗</td>
<td align="center" _msttexthash="910273" _msthash="528">✓</td>
<td align="center" _msttexthash="910637" _msthash="529">✗</td>
</tr>
<tr>
<td align="left"><a href="https://redis.io/commands/watch/" rel="nofollow" _msttexthash="5921513" _msthash="530">手表</a></td>
<td align="center" _msttexthash="910637" _msthash="531">✗</td>
<td align="center" _msttexthash="910273" _msthash="532">✓</td>
<td align="center" _msttexthash="910273" _msthash="533">✓</td>
<td align="center" _msttexthash="910273" _msthash="534">✓</td>
</tr>
<tr>
<td align="left"><a href="#snapshots" _msttexthash="5253729" _msthash="535">快照</a></td>
<td align="center" _msttexthash="910273" _msthash="536">✓</td>
<td align="center" _msttexthash="910273" _msthash="537">✓</td>
<td align="center" _msttexthash="910273" _msthash="538">✓</td>
<td align="center" _msttexthash="910637" _msthash="539">✗</td>
</tr>
<tr>
<td align="left" _msttexthash="14090310" _msthash="540">随机采样</td>
<td align="center" _msttexthash="910637" _msthash="541">✗</td>
<td align="center" _msttexthash="910637" _msthash="542">✗</td>
<td align="center" _msttexthash="910273" _msthash="543">✓</td>
<td align="center" _msttexthash="910273" _msthash="544">✓</td>
</tr>
<tr>
<td align="left" _msttexthash="11883001" _msthash="545">批量枚举</td>
<td align="center" _msttexthash="910637" _msthash="546">✗</td>
<td align="center" _msttexthash="910637" _msthash="547">✗</td>
<td align="center" _msttexthash="910273" _msthash="548">✓</td>
<td align="center" _msttexthash="910273" _msthash="549">✓</td>
</tr>
<tr>
<td align="left" _msttexthash="11518533" _msthash="550">命名集合</td>
<td align="center" _msttexthash="910637" _msthash="551">✗</td>
<td align="center" _msttexthash="910273" _msthash="552">✓</td>
<td align="center" _msttexthash="910273" _msthash="553">✓</td>
<td align="center" _msttexthash="910273" _msthash="554">✓</td>
</tr>
<tr>
<td align="left" _msttexthash="5156736" _msthash="555">开源</td>
<td align="center" _msttexthash="910273" _msthash="556">✓</td>
<td align="center" _msttexthash="910273" _msthash="557">✓</td>
<td align="center" _msttexthash="910637" _msthash="558">✗</td>
<td align="center" _msttexthash="910273" _msthash="559">✓</td>
</tr>
<tr>
<td align="left" _msttexthash="7220239" _msthash="560">兼容性</td>
<td align="center" _msttexthash="3952065" _msthash="561">任何</td>
<td align="center" _msttexthash="3952065" _msthash="562">任何</td>
<td align="center" _msttexthash="4796116" _msthash="563">Linux的</td>
<td align="center" _msttexthash="3952065" _msthash="564">任何</td>
</tr>
<tr>
<td align="left" _msttexthash="4496375" _msthash="565">保持</td>
<td align="center" _msttexthash="6123117" _msthash="566">谷歌</td>
<td align="center" _msttexthash="5097560" _msthash="567">脸书</td>
<td align="center" _msttexthash="5032261" _msthash="568">统一</td>
<td align="center" _msttexthash="5032261" _msthash="569">统一</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto"><font _mstmutation="1" _msttexthash="1288912599" _msthash="570">UCSet 和 UDisk 均由 Unum 设计和维护。
两者都是功能齐全的，但我们的替代方案提供的最关键功能是性能。
在内存中快速操作很容易。
UCSet 的核心逻辑可以在模板化的仅 header 库中找到。</font><code><a href="https://github.com/unum-cloud/ucset">ucset</a></code></p>
<p dir="auto"><font _mstmutation="1" _msttexthash="1946608937" _msthash="571">设计 UDisk 是一项更具挑战性的 7 年工作。
它包括发明新的树状结构、使用实现部分内核旁路、使用完全绕过、CUDA GPU 加速，甚至自定义内部文件系统。<strong _mstmutation="1" _istranslated="1">UDisk 是第一个从头开始设计的引擎，同时考虑了并行架构和内核旁路</strong>。</font><code>io_uring</code><code>SPDK</code></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto" _msttexthash="4549636" _msthash="572">交易</h3><a id="user-content-transactions" class="anchor" aria-label="永久链接： 交易" href="#transactions" _mstaria-label="521547" _msthash="573"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto" _msttexthash="7417397" _msthash="574">原子数</h4><a id="user-content-atomicity" class="anchor" aria-label="永久链接：原子性" href="#atomicity" _mstaria-label="407862" _msthash="575"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="286928759" _msthash="576">原子性始终得到保证。
即使在非事务性写入时，所有更新都通过或全部失败。</p>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto" _msttexthash="8156915" _msthash="577">一致性</h4><a id="user-content-consistency" class="anchor" aria-label="永久链接：一致性" href="#consistency" _mstaria-label="483990" _msthash="578"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="204457461" _msthash="579">一致性以最严格的形式实现 - <a href="https://jepsen.io/consistency/models/strict-serializable" rel="nofollow" _istranslated="1">“严格可序列化性”</a>，这意味着：</p>
<ul dir="auto">
<li _msttexthash="43041245" _msthash="580">reads 是 <a href="https://jepsen.io/consistency/models/serializable" rel="nofollow" _istranslated="1">“Serializable”</a>的，</li>
<li _msttexthash="24381968" _msthash="581">写入是 <a href="https://jepsen.io/consistency/models/linearizable" rel="nofollow" _istranslated="1">“Linearizable”</a> 的。</li>
</ul>
<p dir="auto"><font _mstmutation="1" _msttexthash="601995446" _msthash="582">但是，可以在特定操作级别调整默认行为。
为此，可以传递给 或任何事务性读/写操作，以控制暂存期间的一致性检查。</font><code>::ustore_option_transaction_dont_watch_k</code><code>ustore_transaction_init()</code></p>
<markdown-accessiblity-table data-catalyst=""><table>
<thead>
<tr>
<th align="left"></th>
<th align="center" _msttexthash="3260985" _msthash="583">读</th>
<th align="center" _msttexthash="1900899" _msthash="584">写</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" _msttexthash="2078076" _msthash="585">头</td>
<td align="center" _msttexthash="11473657" _msthash="586">严格串行</td>
<td align="center" _msttexthash="11473657" _msthash="587">严格串行</td>
</tr>
<tr>
<td align="left" _msttexthash="17710524" _msthash="588"><a href="#snapshots" _istranslated="1">快照</a>上的事务</td>
<td align="center" _msttexthash="5450406" _msthash="589">串行</td>
<td align="center" _msttexthash="11473657" _msthash="590">严格串行</td>
</tr>
<tr>
<td align="left" _msttexthash="18442996" _msthash="591">无<a href="#snapshots" _istranslated="1">快照的</a>事务</td>
<td align="center" _msttexthash="11473657" _msthash="592">严格串行</td>
<td align="center" _msttexthash="11473657" _msthash="593">严格串行</td>
</tr>
<tr>
<td align="left" _msttexthash="19975384" _msthash="594">无手表的交易</td>
<td align="center" _msttexthash="11473657" _msthash="595">严格串行</td>
<td align="center" _msttexthash="6069622" _msthash="596">顺序</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<p dir="auto" _msttexthash="176632885" _msthash="597">如果此主题对您来说是新的，请查看有关一致性的 <a href="https://jepsen.io/consistency" rel="nofollow" _istranslated="1">Jepsen.io</a> 博客。</p>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto" _msttexthash="6748820" _msthash="598">隔离</h4><a id="user-content-isolation" class="anchor" aria-label="永久链接：隔离" href="#isolation" _mstaria-label="406679" _msthash="599"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<markdown-accessiblity-table data-catalyst=""><table>
<thead>
<tr>
<th align="left"></th>
<th align="center" _msttexthash="3260985" _msthash="600">读</th>
<th align="center" _msttexthash="1900899" _msthash="601">写</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" _msttexthash="17710524" _msthash="602"><a href="#snapshots" _istranslated="1">快照</a>上的事务</td>
<td align="center" _msttexthash="910273" _msthash="603">✓</td>
<td align="center" _msttexthash="910273" _msthash="604">✓</td>
</tr>
<tr>
<td align="left" _msttexthash="18442996" _msthash="605">无<a href="#snapshots" _istranslated="1">快照的</a>事务</td>
<td align="center" _msttexthash="910637" _msthash="606">✗</td>
<td align="center" _msttexthash="910273" _msthash="607">✓</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto" _msttexthash="7947147" _msthash="608">耐久性</h4><a id="user-content-durability" class="anchor" aria-label="永久链接：持久性" href="#durability" _mstaria-label="442923" _msthash="609"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="1785193202" _msthash="610">根据定义，持久性不适用于内存中系统。
在混合或持久系统中，我们更喜欢默认禁用它。
几乎每个构建在 KVS 之上的 DBMS 都喜欢实现自己的持久性机制。
在分布式数据库中更是如此，其中可能存在三个单独的预写日志：</p>
<ul dir="auto">
<li _msttexthash="15106455" _msthash="611">在 KVS 中，</li>
<li _msttexthash="16223441" _msthash="612">在 DBMS 中，</li>
<li _msttexthash="34977878" _msthash="613">在 Distributed Consensus 实现中。</li>
</ul>
<p dir="auto"><font _mstmutation="1" _msttexthash="519894869" _msthash="614">如果您仍然需要持久性，请使用可选标志对提交进行 flush 写入。
在 <a href="https://unum.cloud/docs/ustore/c" rel="nofollow" _mstmutation="1" _istranslated="1">C 驱动程序</a>中，您可以使用标志进行调用。</font><code>ustore_transaction_commit()</code><code>::ustore_option_write_flush_k</code></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto" _msttexthash="19978673" _msthash="615">容器和云部署</h3><a id="user-content-containers-and-cloud-deployments" class="anchor" aria-label="永久链接：容器和云部署" href="#containers-and-cloud-deployments" _mstaria-label="1376648" _msthash="616"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font _mstmutation="1" _msttexthash="898055873" _msthash="617">整个 DBMS 适合一个低于 100 MB 的 Docker 镜像。
运行以下脚本以拉取并运行容器，在端口 .<a href="https://arrow.apache.org/docs/format/Flight.html" rel="nofollow" _mstmutation="1" _istranslated="1"></a>
默认情况下，客户端 SDK 也将通过同一端口进行通信。</font><code>38709</code></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>docker run -d --rm --name ustore-test -p 38709:38709 unum/ustore</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="docker run -d --rm --name ustore-test -p 38709:38709 unum/ustore" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="102944621" _msthash="618">默认配置文件可以通过以下方式检索：</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>cat /var/lib/ustore/config.json</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="cat /var/lib/ustore/config.json" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="95481815" _msthash="619">连接和测试的最简单方法是以下命令：</p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>python ...</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="python ..." tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="107990558" _msthash="620">预打包的 UStore 映像可在多个平台上使用：</p>
<ul dir="auto">
<li _msttexthash="31679167" _msthash="621">Docker Hub 镜像：<a href="https://hub.docker.com/r/unum/ustore" rel="nofollow" _istranslated="1">v0.7</a>。</li>
<li _msttexthash="46577284" _msthash="622">RedHat OpenShift 操作员：<a href="https://github.com/itroyano/ustore-operator" _istranslated="1">v0.7</a>。</li>
<li><font _mstmutation="1" _msttexthash="46001150" _msthash="623">Amazon AWS Marketplace 镜像：</font><ul dir="auto">
<li _msttexthash="29191019" _msthash="624">免费社区版：<a href="https://aws.amazon.com/marketplace/pp/prodview-ls2zmt5jkhipc?sr=0-1&amp;ref_=beagle&amp;applicationId=AWSMPContessa" rel="nofollow" _istranslated="1">v0.4</a>。</li>
<li _msttexthash="32990022" _msthash="625">内存版： 🔜</li>
<li _msttexthash="34333156" _msthash="626">性能版： 🔜</li>
</ul>
</li>
</ul>
<p dir="auto" _msttexthash="86984378" _msthash="627">不要犹豫，将 UStore 商业化和重新分发。</p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto" _msttexthash="6777615" _msthash="628">配置</h3><a id="user-content-configuration" class="anchor" aria-label="永久链接： 配置" href="#configuration" _mstaria-label="559312" _msthash="629"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="705597828" _msthash="630">优化数据库既是一门艺术，也是一门科学。
RocksDB 等项目提供了数十个旋钮来优化行为。
我们允许将专用配置文件转发到底层引擎。</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto"><pre>{
    <span class="pl-ent">"version"</span>: <span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"directory"</span>: <span class="pl-s"><span class="pl-pds">"</span>./tmp/<span class="pl-pds">"</span></span>
}</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="{
    &quot;version&quot;: &quot;1.0&quot;,
    &quot;directory&quot;: &quot;./tmp/&quot;
}" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="648639030" _msthash="631">我们还有一个更简单的程序，对 80% 的用户来说已经足够了。
这可以扩展为利用多个设备或目录，或转发专用的引擎配置。</p>
<div class="highlight highlight-source-json notranslate position-relative overflow-auto" dir="auto"><pre>{
    <span class="pl-ent">"version"</span>: <span class="pl-s"><span class="pl-pds">"</span>1.0<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"directory"</span>: <span class="pl-s"><span class="pl-pds">"</span>/var/lib/ustore<span class="pl-pds">"</span></span>,
    <span class="pl-ent">"data_directories"</span>: [
        {
            <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/dev/nvme0p0/<span class="pl-pds">"</span></span>,
            <span class="pl-ent">"max_size"</span>: <span class="pl-s"><span class="pl-pds">"</span>100GB<span class="pl-pds">"</span></span>
        },
        {
            <span class="pl-ent">"path"</span>: <span class="pl-s"><span class="pl-pds">"</span>/dev/nvme1p0/<span class="pl-pds">"</span></span>,
            <span class="pl-ent">"max_size"</span>: <span class="pl-s"><span class="pl-pds">"</span>100GB<span class="pl-pds">"</span></span>
        }
    ],
    <span class="pl-ent">"engine"</span>: {
        <span class="pl-ent">"config_file_path"</span>: <span class="pl-s"><span class="pl-pds">"</span>./engine_rocksdb.ini<span class="pl-pds">"</span></span>,
    }
}</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="{
    &quot;version&quot;: &quot;1.0&quot;,
    &quot;directory&quot;: &quot;/var/lib/ustore&quot;,
    &quot;data_directories&quot;: [
        {
            &quot;path&quot;: &quot;/dev/nvme0p0/&quot;,
            &quot;max_size&quot;: &quot;100GB&quot;
        },
        {
            &quot;path&quot;: &quot;/dev/nvme1p0/&quot;,
            &quot;max_size&quot;: &quot;100GB&quot;
        }
    ],
    &quot;engine&quot;: {
        &quot;config_file_path&quot;: &quot;./engine_rocksdb.ini&quot;,
    }
}" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto" _msttexthash="84445244" _msthash="632">还可以使用 JSON 文件配置数据库集合。</p>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto" _msttexthash="11829467" _msthash="633">密钥大小</h4><a id="user-content-key-sizes" class="anchor" aria-label="永久链接：密钥大小" href="#key-sizes" _mstaria-label="368017" _msthash="634"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font _mstmutation="1" _msttexthash="763207705" _msthash="635">从当前版本开始，使用 64 位有符号整数。
它允许在 .
带有 UUID 的 128 位版本即将推出，但强烈建议不要使用可变长度的密钥。
为什么呢？</font><code>[0, 2^63)</code></p>
<p dir="auto" _msttexthash="3426313319" _msthash="636">使用可变长度键会对 Key-Value store 的设计施加许多限制。
首先，它意味着缓慢的字符比较 — 这是现代超标量 CPU 的性能杀手。
其次，它强制在磁盘上连接键和值，以最小化导航所需的元数据。
最后，它违背了我们将 KVS 视为“持久内存分配器”的简单逻辑观点，从而为其带来了更多的责任。</p>
<hr>
<p dir="auto" _msttexthash="70968482" _msthash="637">处理字符串键的推荐方法是：</p>
<ol dir="auto">
<li _msttexthash="225355780" _msthash="638">选择一种机制来生成唯一整数键 （UID）。例如：单调递增的值。</li>
<li _msttexthash="129641902" _msthash="639">使用 <a href="#paths" _istranslated="1">“paths”</a> 模式构建字符串到 UID 的持久哈希映射。</li>
<li _msttexthash="143000130" _msthash="640">使用这些 UID 以二进制、文档和图形模态处理其余数据。</li>
</ol>
<p dir="auto" _msttexthash="507827216" _msthash="641">这将导致从字符串到整数表示的单个转换点，并将使大多数系统保持敏捷和 C 级接口比它们本来应该的更简单。</p>
<div class="markdown-heading" dir="auto"><h4 tabindex="-1" class="heading-element" dir="auto" _msttexthash="7000071" _msthash="642">值大小</h4><a id="user-content-value-sizes" class="anchor" aria-label="永久链接：值大小" href="#value-sizes" _mstaria-label="437970" _msthash="643"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="2728160370" _msthash="644">截至目前，我们只能处理 4 GB 或更小的值。
为什么？
键值存储通常用于高频操作。
在现代硬件上，通常（每秒数千次）访问和修改 4 GB 或更大的文件是不可能的。
因此，我们坚持使用较小的长度类型，这使得使用 Apache Arrow 表示稍微容易一些，并允许 KVS 更好地压缩索引。</p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto" _msttexthash="9286563" _msthash="645">路线图</h2><a id="user-content-roadmap" class="anchor" aria-label="永久链接： 路线图" href="#roadmap" _mstaria-label="331747" _msthash="646"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto" _msttexthash="282727900" _msthash="647">我们的<a href="https://github.com/orgs/unum-cloud/projects/2" _istranslated="1">开发路线图</a>是公开的，并托管在 GitHub 存储库中。
即将完成的任务包括：</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""><font _mstmutation="1" _msttexthash="35572485" _msthash="648">适用于 Arm、MacOS 的构建。</font></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox" checked=""><font _mstmutation="1" _msttexthash="12794678" _msthash="649">持久快照。</font></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox"><font _mstmutation="1" _msttexthash="13891501" _msthash="650">连续复制。</font></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox"><font _mstmutation="1" _msttexthash="25011597" _msthash="651">文档架构验证。</font></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox"><font _mstmutation="1" _msttexthash="137393152" _msthash="652">适用于 GoLang、Java、JavaScript 的更丰富的驱动程序。</font></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox"><font _mstmutation="1" _msttexthash="30713826" _msthash="653">改进的矢量搜索。</font></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox"><font _mstmutation="1" _msttexthash="20960953" _msthash="654">集合级配置。</font></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox"><font _mstmutation="1" _msttexthash="40749787" _msthash="655">拥有和非拥有 C++ 包装器。</font></li>
<li class="task-list-item"><input type="checkbox" id="" disabled="" class="task-list-item-checkbox"><font _mstmutation="1" _msttexthash="13970827" _msthash="656">水平缩放。</font></li>
</ul>
<blockquote>
<p dir="auto" _msttexthash="86061027" _msthash="657"><a href="https://unum.cloud/docs/ustore/architecture" rel="nofollow" _istranslated="1">在此处阅读我们文档中的完整路线图</a>。</p>
</blockquote>
</article></div>
